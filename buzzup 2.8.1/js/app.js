var buzzUp=angular.module("buzz-up",["ionic","buzzUpControllers","buzzUpServices","angular-gestures","firebase","ionic.contrib.ui.cards","ngImgCache"]);!function(e){"use strict";var t=e.module("ngImgCache",[]);t.directive("ngCache",function(){return{restrict:"A",link:function(e,t,o){o.$observe("ngSrc",function(e){ImgCache.isCached(e,function(o,i){i?ImgCache.useCachedFile(t):ImgCache.cacheFile(e,function(){ImgCache.useCachedFile(t)})})})}}})}(angular),buzzUp.config(["$httpProvider","$stateProvider","$urlRouterProvider",function(e,t,o){var i,s=["$q","$injector","$rootScope","$q",function(e,t,o,e){function s(e){return i=i||t.get("$http"),i.pendingRequests.length<1&&o.$broadcast("loading:hide"),e}function r(s){return i=i||t.get("$http"),i.pendingRequests.length<1&&o.$broadcast("loading:hide"),e.reject(s)}var r;return function(e){return o.$broadcast("loading:show"),e.then(s,r)}}];e.responseInterceptors.push(s),t.state("home",{url:"/home",templateUrl:"templates/home.html",controller:"HomeController",resolve:{recentlyPlayedList:["RecentlyPlayedService",function(e){return e.getPlayed()}],homeData:["HomeService",function(e){return e.getHomeData()}]}}).state("topics",{url:"/topics",templateUrl:"templates/topics.html",controller:"TopicsController",resolve:{allTopics:["TopicsService",function(e){return e.getAllTopics()}],refreshTopics:["TopicsService",function(e){return e.refreshTopicsList()}]}}).state("sub-topic",{url:"/topics/:topicId",templateUrl:"templates/sub-topics.html",controller:"SubTopicsController",resolve:{subTopics:["$stateParams","SubTopicsService",function(e,t){return t.getSubTopics(e.topicId)}],refreshSubTopics:["$stateParams","SubTopicsService",function(e,t){return t.refreshSubTopics(e.topicId)}]}}).state("sub-topic-questions",{url:"/sub-topic/:subTopicId",templateUrl:"templates/sub-topic-questions.html",controller:"SubTopicQuestionsController"}).state("topic-request",{url:"/topic-request",templateUrl:"templates/topic-request.html",controller:"TopicRequestController"}).state("help",{url:"/help",templateUrl:"templates/help.html",controller:"HelpController"}).state("cant-connect",{url:"/connection-error",templateUrl:"templates/cant-connect.html",controller:"CantConnectController"}).state("stats",{url:"/stats",templateUrl:"templates/stats.html",controller:"StatsController",resolve:{totalMatches:["StatsService",function(e){return e.getTotal()}],blueWins:["StatsService",function(e){return e.getWins("blueWon")}],greenWins:["StatsService",function(e){return e.getWins("greenWon")}],tie:["StatsService",function(e){return e.getTie()}],BUQ:["BUQService",function(e){return e.getBUQ()}]}}),o.otherwise("/topics")}]),buzzUp.run(["$window","$ionicPlatform","LocalStorageService","$rootScope","$ionicLoading","ConnectionService","SessionStorageService","$state","RecentlyPlayedService","$ionicModal","GetTopicNameService","$timeout",function(e,t,o,i,s,r,n,c,l,a,g,u){function p(){i.isArtsBg=i.isBusinessBg=i.isEduBg=i.isGamesBg=i.isGeoBg=i.isHistoryBg=i.isLitBg=i.isLifestyleBg=i.isMovieBg=i.isMusicBg=i.isNatureBg=i.isPeopleBg=i.isScienceBg=i.isSportsBg=i.isTechBg=i.isTvBg=!1}ImgCache.options.debug=!0,ImgCache.options.localCacheFolder="BuzzUp",t.ready(function(){ImgCache.init(function(){console.log("ImgCache init: success!")},function(){console.log("ImgCache init: error! Check the log for errors")}),window.cordova&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),window.StatusBar&&StatusBar.styleDefault(),i.$on("loading:show",function(){s.show({noBackdrop:!0,template:'<svg class="spinner" width="65px" height="65px" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg"><circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg>'})}),i.$on("loading:hide",function(){s.hide()}),r.connectionStatus()?n.set("connected",!0):window.sessionStorage.removeItem("connected"),n.set("connectionError",parseInt(0)),e.localStorage.BUQ||o.set("BUQ",parseInt(0)),e.localStorage.recentlyPlayed||o.setObject("recentlyPlayed",null),e.localStorage.totalPlayed||o.set("totalPlayed",parseInt(0)),e.localStorage.blueWon||o.set("blueWon",parseInt(0)),e.localStorage.greenWon||o.set("greenWon",parseInt(0)),e.localStorage.tie||o.set("tie",parseInt(0)),document.addEventListener("offline",function(){window.sessionStorage.removeItem("connected")},!1),document.addEventListener("online",function(){n.set("connected",!0)},!1),a.fromTemplateUrl("templates/conformTopic.html",function(e){i.modal=e},{scope:i,animation:"slide-in-up",backdropClickToClose:!1}),i.showConformation=function(e,t,o,s,r){var n=null;i.modal.show();var a={id:e,thumb:t,name:o,desc:s};i.topicName=n=void 0!=r?r:g.getName(),l.setPlayed(a),i.playingText=o,p(),i.imgsrc=null,u(function(){"Arts"==n?(i.imgsrc="img/art-tree.jpg",i.isArtsBg=!0):"Business"==n?(i.imgsrc="img/business.jpg",i.isBusinessBg=!0):"Education"==n?(i.imgsrc="img/education-school.jpg",i.isEduBg=!0):"Games"==n?(i.imgsrc="img/games.jpg",i.isGamesBg=!0):"Geography"==n?(i.imgsrc="img/geo.jpg",i.isGeoBg=!0):"History"==n?(i.imgsrc="img/history.png",i.isHistoryBg=!0):"Lifestyle"==n?(i.imgsrc="img/lifestyle.jpg",i.isLifestyleBg=!0):"Literature"==n?(i.imgsrc="img/lit.jpg",i.isLitBg=!0):"Movies"==n?(i.imgsrc="img/movie.jpg",i.isMusicBg=!0):"Music"==n?(i.imgsrc="img/music.jpg",i.isMusicBg=!0):"Nature"==n?(i.imgsrc="img/nature.jpg",i.isNatureBg=!0):"People"==n?(i.imgsrc="img/people.jpg",i.isPeopleBg=!0):"Science"==n?(i.imgsrc="img/science.jpg",i.isScienceBg=!0):"Sports"==n?(i.imgsrc="img/sports.jpg",i.isSportsBg=!0):"Technology"==n?(i.imgsrc="img/tech.jpg",i.isTechBg=!0):"Television"==n&&(i.imgsrc="img/tv.jpg",i.isTvBg=!0)},700);var m=new Array;m=e.split("-"),i.playingNow=m[0],i.hideTheModal=function(){i.modal.hide()},i.goToGame=function(){i.modal.hide(),c.go("sub-topic-questions",{subTopicId:e})}}})}]);